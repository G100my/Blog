<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="google-site-verification" content="tf18HhmYfg1OqUkm85gsOQgzEf3eCml_yx2uBLfKGrc"><link rel="icon" type="image/x-icon" href="favicon.ico?v=2"><title>Github Action 加入 Slack 通知 | G100 印象派 前端 筆記</title><meta name="description" content="在 github action 裡面加入 Slack bot 通知每次 deploy 的結果">
    <link rel="modulepreload" href="/assets/app.c89a8060.js"><link rel="modulepreload" href="/assets/04-slack_bot_github_action.html.19a1edba.js"><link rel="modulepreload" href="/assets/04-slack_bot_github_action.html.7d91b086.js">
    <link rel="stylesheet" href="/assets/style.8ae03792.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">G100 印象派 前端 筆記</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Anything"><span class="title">Anything</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Anything"><span class="title">Anything</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/anything/01-postMessage.html" class="" aria-label="在不同窗口之間傳遞資訊 window.postMessage()"><!--[--><!--]--> 在不同窗口之間傳遞資訊 window.postMessage() <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/anything/02-git_command.html" class="" aria-label="自以為的 git 指令精選"><!--[--><!--]--> 自以為的 git 指令精選 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/anything/03-CriticalCSS.html" class="" aria-label="什麼是 Critical Rendering Path？"><!--[--><!--]--> 什麼是 Critical Rendering Path？ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/anything/04-slack_bot_github_action.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Github Action 加入 Slack 通知"><!--[--><!--]--> Github Action 加入 Slack 通知 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Side Project"><span class="title">Side Project</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Side Project"><span class="title">Side Project</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/sideProject/SpaceRadio.html" class="" aria-label="Space radio 空間廣播"><!--[--><!--]--> Space radio 空間廣播 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vue/01-vue-RenderFunction.html" class="" aria-label="dynamic component - :is  用 Render function"><!--[--><!--]--> dynamic component - :is  用 Render function <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vuepress"><span class="title">Vuepress</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vuepress"><span class="title">Vuepress</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vuepress/01-init.html" class="" aria-label="用 Vuepress 架個人部落格"><!--[--><!--]--> 用 Vuepress 架個人部落格 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress/02-container-info.html" class="" aria-label="設置和 HackMD 一樣的 markdown container syntax - info"><!--[--><!--]--> 設置和 HackMD 一樣的 markdown container syntax - info <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress/03-vueComponent.html" class="" aria-label="直接在 `.md` 裡面直接引用 Vue"><!--[--><!--]--> 直接在 `.md` 裡面直接引用 Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress/04-extendDefaultTheme.html" class="" aria-label="把 Default theme 做點修改"><!--[--><!--]--> 把 Default theme 做點修改 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress/05-tailwind.html" class="" aria-label="Set up Tailwind in Vuepress"><!--[--><!--]--> Set up Tailwind in Vuepress <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/G100my/G100my.github.io/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Anything"><span class="title">Anything</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Anything"><span class="title">Anything</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/anything/01-postMessage.html" class="" aria-label="在不同窗口之間傳遞資訊 window.postMessage()"><!--[--><!--]--> 在不同窗口之間傳遞資訊 window.postMessage() <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/anything/02-git_command.html" class="" aria-label="自以為的 git 指令精選"><!--[--><!--]--> 自以為的 git 指令精選 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/anything/03-CriticalCSS.html" class="" aria-label="什麼是 Critical Rendering Path？"><!--[--><!--]--> 什麼是 Critical Rendering Path？ <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/anything/04-slack_bot_github_action.html" class="router-link-active router-link-exact-active router-link-active" aria-label="Github Action 加入 Slack 通知"><!--[--><!--]--> Github Action 加入 Slack 通知 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Side Project"><span class="title">Side Project</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Side Project"><span class="title">Side Project</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/sideProject/SpaceRadio.html" class="" aria-label="Space radio 空間廣播"><!--[--><!--]--> Space radio 空間廣播 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vue/01-vue-RenderFunction.html" class="" aria-label="dynamic component - :is  用 Render function"><!--[--><!--]--> dynamic component - :is  用 Render function <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vuepress"><span class="title">Vuepress</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vuepress"><span class="title">Vuepress</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vuepress/01-init.html" class="" aria-label="用 Vuepress 架個人部落格"><!--[--><!--]--> 用 Vuepress 架個人部落格 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress/02-container-info.html" class="" aria-label="設置和 HackMD 一樣的 markdown container syntax - info"><!--[--><!--]--> 設置和 HackMD 一樣的 markdown container syntax - info <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress/03-vueComponent.html" class="" aria-label="直接在 `.md` 裡面直接引用 Vue"><!--[--><!--]--> 直接在 `.md` 裡面直接引用 Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress/04-extendDefaultTheme.html" class="" aria-label="把 Default theme 做點修改"><!--[--><!--]--> 把 Default theme 做點修改 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress/05-tailwind.html" class="" aria-label="Set up Tailwind in Vuepress"><!--[--><!--]--> Set up Tailwind in Vuepress <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/G100my/G100my.github.io/" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Anything <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/anything/01-postMessage.html" class="sidebar-item" aria-label="在不同窗口之間傳遞資訊 window.postMessage()"><!--[--><!--]--> 在不同窗口之間傳遞資訊 window.postMessage() <!--[--><!--]--></a><!----></li><li><a href="/anything/02-git_command.html" class="sidebar-item" aria-label="自以為的 git 指令精選"><!--[--><!--]--> 自以為的 git 指令精選 <!--[--><!--]--></a><!----></li><li><a href="/anything/03-CriticalCSS.html" class="sidebar-item" aria-label="什麼是 Critical Rendering Path？"><!--[--><!--]--> 什麼是 Critical Rendering Path？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/anything/04-slack_bot_github_action.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Github Action 加入 Slack 通知"><!--[--><!--]--> Github Action 加入 Slack 通知 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Side Project <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/sideProject/SpaceRadio.html" class="sidebar-item" aria-label="Space radio 空間廣播"><!--[--><!--]--> Space radio 空間廣播 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Vue <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vue/01-vue-RenderFunction.html" class="sidebar-item" aria-label="dynamic component - :is  用 Render function"><!--[--><!--]--> dynamic component - :is  用 Render function <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Vuepress <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/vuepress/01-init.html" class="sidebar-item" aria-label="用 Vuepress 架個人部落格"><!--[--><!--]--> 用 Vuepress 架個人部落格 <!--[--><!--]--></a><!----></li><li><a href="/vuepress/02-container-info.html" class="sidebar-item" aria-label="設置和 HackMD 一樣的 markdown container syntax - info"><!--[--><!--]--> 設置和 HackMD 一樣的 markdown container syntax - info <!--[--><!--]--></a><!----></li><li><a href="/vuepress/03-vueComponent.html" class="sidebar-item" aria-label="直接在 `.md` 裡面直接引用 Vue"><!--[--><!--]--> 直接在 `.md` 裡面直接引用 Vue <!--[--><!--]--></a><!----></li><li><a href="/vuepress/04-extendDefaultTheme.html" class="sidebar-item" aria-label="把 Default theme 做點修改"><!--[--><!--]--> 把 Default theme 做點修改 <!--[--><!--]--></a><!----></li><li><a href="/vuepress/05-tailwind.html" class="sidebar-item" aria-label="Set up Tailwind in Vuepress"><!--[--><!--]--> Set up Tailwind in Vuepress <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="怎麼在-github-action-flow-運作時-發送訊息到-slack-channel" tabindex="-1"><a class="header-anchor" href="#怎麼在-github-action-flow-運作時-發送訊息到-slack-channel" aria-hidden="true">#</a> 怎麼在 Github action flow 運作時，發送訊息到 Slack Channel?</h1><p>工作中接到的任務：要在每次 push、deploy 的 github action 裡面加入 Slack bot 在指定 Slack Channel 出現通知。</p><p>Slack 官方其實已經做出很多 integration/api 可以使用， 之前公司的前輩是使用，<a href="https://github.com/rtCamp/action-slack-notify" target="_blank" rel="noopener noreferrer">rtCamp 做的 Github action<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 用的是 <a href="https://lubn.slack.com/apps/A0F7XDUAZ-incoming-webhooks?tab=more_info" target="_blank" rel="noopener noreferrer">Incoming WebHooks<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 這個 Slack app。</p><p>而換我要來建置新專案的時候看到這段</p><blockquote><p>Please note, this is a legacy custom integration - an outdated way for teams to integrate with Slack. These integrations lack newer features and they will be deprecated and possibly removed in the future. We do not recommend their use. Instead, we suggest that you check out their replacement: Slack apps.</p></blockquote><p>雖然沒有說什麼時候會真的被廢棄掉，但想到以後可能又要在設定一次就覺得麻煩， 乾脆一次就先弄好， 所以開始海量搜尋，這種小東西的資源真的都比較少啊。</p><p>找到這個 <a href="https://github.com/slackapi/slack-github-action" target="_blank" rel="noopener noreferrer">Slack api official repo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>採用第二種方式 - Technique 2: Slack App</p><p>照著做一次就搞定， 整個設定大概 5 分鐘結束。</p><p>以下單純把文件超級簡單翻譯一下</p><h2 id="technique-2-slack-app" tabindex="-1"><a class="header-anchor" href="#technique-2-slack-app" aria-hidden="true">#</a> Technique 2: Slack App</h2><p>首先要先建立或者使用既有的 Slack app， 用這個 app 來調用 <a href="https://api.slack.com/methods/chat.postMessage" target="_blank" rel="noopener noreferrer">chat.postMessage<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> API method，</p><h3 id="setup" tabindex="-1"><a class="header-anchor" href="#setup" aria-hidden="true">#</a> Setup</h3><ul><li><a href="https://api.slack.com/apps" target="_blank" rel="noopener noreferrer">建立 Slack App<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><img src="/assets/2022-02-11-01-06-23.0d19b8f6.png" alt=""><img src="/assets/2022-02-11-01-07-37.d1b4797b.png" alt=""> 先選擇 <code>From scratch</code> 就可以了</li><li>把 <a href="https://api.slack.com/scopes/chat:write" target="_blank" rel="noopener noreferrer"><code>chat.write</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 這項 機器人權限範圍（bot scope）加到 <strong>OAuth &amp; Permissions</strong> 底下 <img src="/assets/2022-02-11-01-09-00.44c2c0b4.png" alt=""></li><li>安裝到目標 Slack workspace（Install the app to your workspace.）</li><li>從 <strong>OAuth &amp; Permissions</strong> 複製 <code>Bot Token</code> 然後 <a href="https://docs.github.com/en/free-pro-team@latest/actions/reference/encrypted-secrets#creating-encrypted-secrets-for-a-repository" target="_blank" rel="noopener noreferrer">加到 Github repo - secret<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 命名為 <code>SLACK_BOT_TOKEN</code>。<s>當然如果你的 repo 是 <code>private</code> 且保證不會有其他人看到，你也可以直接把 token 貼到 github action flow 的 <code>.yaml</code> 裡面(?)</s></li><li>把機器人加到你要發送訊息的 Channel 裡面 (<code>/invite @bot_user_name</code>).</li></ul><h3 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h3><p>把這段 Action <a href="job-step">step</a> 加到你的 GitHub Action Workflow file</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Post to a Slack channel
  <span class="token key atrule">id</span><span class="token punctuation">:</span> slack
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> slackapi/slack<span class="token punctuation">-</span>github<span class="token punctuation">-</span>action@v1.18.0
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token comment"># Slack channel id, channel name, or user id to post message.</span>
    <span class="token comment"># See also: https://api.slack.com/methods/chat.postMessage#channels</span>
    <span class="token key atrule">channel-id</span><span class="token punctuation">:</span> <span class="token string">&#39;CHANNEL_ID&#39;</span>
    <span class="token comment"># For posting a simple plain text message</span>
    <span class="token key atrule">slack-message</span><span class="token punctuation">:</span> <span class="token string">&quot;GitHub build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}&quot;</span>
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
    <span class="token key atrule">SLACK_BOT_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.SLACK_BOT_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>可以用 JSON 的格式可以去自訂訊息內容。 在 Slack 的世界裡面這個東西叫 <code>Block Kit</code>， 感覺可以做出很多元的東西！！但...如果要快捷一點可以用下面這個 Builder 迅速匯入模板來修改比較不會浪費生命</p><p><a href="https://app.slack.com/block-kit-builder/T92N97FNG" target="_blank" rel="noopener noreferrer">Slack Block Kit Builder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Post to a Slack channel
  <span class="token key atrule">id</span><span class="token punctuation">:</span> slack
  <span class="token key atrule">uses</span><span class="token punctuation">:</span> slackapi/slack<span class="token punctuation">-</span>github<span class="token punctuation">-</span>action@v1.16.0
  <span class="token key atrule">with</span><span class="token punctuation">:</span>
    <span class="token comment"># Slack channel id, channel name, or user id to post message.</span>
    <span class="token comment"># See also: https://api.slack.com/methods/chat.postMessage#channels</span>
    <span class="token key atrule">channel-id</span><span class="token punctuation">:</span> <span class="token string">&#39;CHANNEL_ID&#39;</span>
    <span class="token comment"># For posting a rich message using Block Kit</span>
    <span class="token key atrule">payload</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
      {
        &quot;text&quot;: &quot;GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}&quot;,
        &quot;blocks&quot;: [
          {
            &quot;type&quot;: &quot;section&quot;,
            &quot;text&quot;: {
              &quot;type&quot;: &quot;mrkdwn&quot;,
              &quot;text&quot;: &quot;GitHub Action build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}&quot;
            }
          }
        ]
      }</span>
  <span class="token key atrule">env</span><span class="token punctuation">:</span>
    <span class="token key atrule">SLACK_BOT_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.SLACK_BOT_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><img src="/assets/2022-02-11-00-42-33.ca87211e.png" alt=""></p><h3 id="最後附上我的範例" tabindex="-1"><a class="header-anchor" href="#最後附上我的範例" aria-hidden="true">#</a> 最後附上我的範例</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Post to a Slack channel
        <span class="token key atrule">id</span><span class="token punctuation">:</span> slack
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> slackapi/slack<span class="token punctuation">-</span>github<span class="token punctuation">-</span>action@v1.18.0
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># Slack channel id, channel name, or user id to post message.</span>
          <span class="token comment"># See also: https://api.slack.com/methods/chat.postMessage#channels</span>
          <span class="token key atrule">channel-id</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span>secrets.SLACK_CHANNEL_ID<span class="token punctuation">}</span><span class="token punctuation">}</span>

          <span class="token comment"># For posting a simple plain text message</span>
          <span class="token comment"># slack-message: &#39;GitHub build result: ${{ job.status }}\n${{ github.event.pull_request.html_url || github.event.head_commit.url }}&#39;</span>

          <span class="token comment"># For posting a rich message using Block Kit</span>
          <span class="token key atrule">payload</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            {
              &quot;blocks&quot;: [
                {
                  &quot;type&quot;: &quot;section&quot;,
                  &quot;text&quot;: {
                    &quot;type&quot;: &quot;mrkdwn&quot;,
                    &quot;text&quot;: &quot;＿＿＿＿＿ has a new update:\n*&lt;${{secrets.SLACK_URL_PRODUCTION}}|Production&gt;*\t*&lt;${{secrets.SLACK_URL_STAGING}}|Staging&gt;*&quot;
                  }
                },
                {
                  &quot;type&quot;: &quot;section&quot;,
                  &quot;fields&quot;: [
                    {
                      &quot;type&quot;: &quot;mrkdwn&quot;,
                      &quot;text&quot;: &quot;*Branch:* ${{github.ref_name}}&quot;
                    },
                    {
                      &quot;type&quot;: &quot;mrkdwn&quot;,
                      &quot;text&quot;: &quot;*Build result:* ${{ job.status }}&quot;
                    },
                    {
                      &quot;type&quot;: &quot;mrkdwn&quot;,
                      &quot;text&quot;: &quot;*Repo:* ${{github.repository}}&quot;
                    },
                    {
                      &quot;type&quot;: &quot;mrkdwn&quot;,
                      &quot;text&quot;: &quot;*Actor:* ${{github.actor}}&quot;
                    },
                    {
                      &quot;type&quot;: &quot;mrkdwn&quot;,
                      &quot;text&quot;: &quot;*Compare:* ${{github.event.compare}}&quot;
                    }
                  ]
                }
              ]
            }</span>
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">SLACK_BOT_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.SLACK_BOT_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p>裡面有附上一些 <code>github action</code> 特有的 <code>context</code> 可以到 <a href="https://docs.github.com/en/actions/learn-github-actions/contexts" target="_blank" rel="noopener noreferrer">github 官網看文件<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/G100my/G100my.github.io//edit/main/anything/04-slack_bot_github_action.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: g100my.lan229@gmail.com">G100</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/anything/03-CriticalCSS.html" class="" aria-label="什麼是 Critical Rendering Path？"><!--[--><!--]--> 什麼是 Critical Rendering Path？ <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.c89a8060.js" defer></script>
  </body>
</html>
